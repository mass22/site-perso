import React, { Component } from "react";
import Link from "gatsby-link";
import Img from "gatsby-image";
import * as PropTypes from "prop-types";
import Helmet from "react-helmet";
import config from "../../data/SiteConfig";
import Slider from "react-slick";
import MarkdownRenderer from "react-markdown-renderer";
/** Style **/
import styled from "styled-components";
import * as palette from "../layouts/scss/variables";
import { Item, Container, Segment, Image } from "semantic-ui-react";

import Background from "../static/backgrounds/bg-home-2.jpeg";

const propTypes = {
  data: PropTypes.object.isRequired
};

const Recommandation = styled.article`
  border-top: 2px solid ${palette.DARK_GRAY};
  border-bottom: 2px solid ${palette.DARK_GRAY};
  padding: 20px 0;
  @media (${palette.SM}) {
    padding: 40px;
  }
`;

const BgImage = styled(Img)`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  z-index: -1;
  height: 100vh; // or whatever

  // Adjust image positioning (if image covers area with defined height) and add font-family for polyfill
  & > img {
    object-fit: cover !important; // or whatever
    object-position: 0% 0% !important; // or whatever
    font-family: "object-fit: cover !important; object-position: 0% 0% !important;"; // needed for IE9+ polyfill
  }
`;

const AbsoluteContainer = styled(Container)`
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  left: 0;
  right: 0;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.4);
`;

const CenterBloc = styled.div`
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  left: 0;
  right: 0;
  h1 {
    text-shadow: 1px 1px 1px #000;
  }
  svg {
    max-width: 300px;
  }
`;

class IndexPage extends React.Component {
  render() {
    const settings = {
      dots: true,
      infinite: true,
      lazyLoad: true,
      adaptiveHeight: true,
      accessibility: true,
      slidesToShow: 1,
      slidesToScroll: 1,
      swipeToSlide: true,
      autoplay: true,
      autoplaySpeed: 7000,
      speed: 2000
    };

    const frHomepage = this.props.data.fr.edges[0];

    const bg = this.props.data.bg.edges[0].node.sizes;

    const HOMEPAGE = ({ node }) => (
      <div>
        <Segment
          inverted
          textAlign="center"
          style={{ position: "relative" }}
          vertical
        >
          <BgImage src={bg.src} sizes={bg} aria-hidden="true" />
          <AbsoluteContainer text>
            <CenterBloc>
              <h1>{frHomepage.node.name}</h1>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 362.96 360.96">
  <path fill="none" d="M187.98 1c57.66 0 115.32.04 172.98-.1 3.42-.01 4.1.67 4.09 4.1-.11 117.98-.11 235.97 0 353.96 0 3.42-.67 4.1-4.09 4.1-118.65-.11-237.31-.11-355.96 0-3.42 0-4.1-.67-4.1-4.09.12-118 .12-235.99 0-353.97C.9 1.58 1.57.9 5 .9c56.99.14 113.98.1 170.98.1.34.51.28.97-.17 1.39-4.94 1.84-10.19 1.05-15.28 1.7-35.55 4.54-66.92 18.32-94.04 41.73-32.85 28.35-52.9 64.05-59.42 106.83-6.25 41 .41 80.08 21.68 116.01 28.63 48.36 70.97 77.51 126.4 86.26 41.13 6.5 80.38-.64 116.36-22.2 47.87-28.69 76.71-70.85 85.41-125.89 6.44-40.77-.5-79.74-21.69-115.51-28.64-48.35-71.06-76.9-126.35-86.51-6.87-1.2-13.91-.85-20.73-2.41-.45-.42-.51-.89-.17-1.4z"/>
  <path fill="#868888" d="M187.98 1a.9.9 0 0 0 .06.95c-4.04 2.39-8.09 2.39-12.13 0 .2-.3.23-.62.06-.95h12.01z"/>
  <path fill="#444" d="M175.91 1.95h12.13c41.97 1.24 78.71 15.92 110.52 43.15 32.07 27.46 51.97 62.27 58.97 103.59 9.35 55.17-4.12 104.84-40.57 147.7-27.33 32.14-62.18 52.07-103.53 59.11-55.17 9.38-104.83-4.05-147.75-40.43-30.64-25.97-50.3-58.96-58.14-98.15-11.41-57 1.59-108.45 39.24-153.11 25.88-30.7 59.04-49.61 98.06-58.36 10.19-2.28 20.55-3.83 31.07-3.5z"/>
  <path fill="#add4ec" d="M182.28 8.23c94.33.17 171.68 77.84 171.44 172.17-.23 94.34-77.97 171.63-172.29 171.32-94.15-.31-171.3-77.78-171.2-171.92.1-94.33 77.71-171.73 172.05-171.57z"/>
  <path fill="#fe5722" d="M65.71 195.96c-.78 3.67-1.59 7.32-2.33 11-.96 4.74-4.43 5.38-8.29 4.77-4.17-.65-4.63-3.93-3.9-7.21a474 474 0 0 0 5.31-26.97c.66-4.06.42-8.16 1.41-12.23.87-3.59-.02-7.53 1.07-11.29.42-1.44.65-3.39-1.02-4.59-1.96-1.4-3.52.12-4.94 1-3.11 1.9-5.96 4.21-8.04 7.26-.56.82-1.06 1.2-1.96.99-1.14-.26-.82-1.27-.91-2.02-.87-7.36 8.56-19.02 15.82-19.57 3.84-.29 7.5 2.82 8.93 7.05 2.12 6.27.44 12.4-.45 18.53-.24 1.64-.56 3.17-.04 5.69 3.34-7.68 5.92-14.92 10.62-21.06 2.93-3.83 5.91-7.73 10.31-9.79 7.15-3.36 13.43.64 13.51 8.6.05 5.08.87 10.25-.82 15.29-.27.82-.37 2.02.87 2.54 3.07-4.92 3.77-10.94 7.27-15.67 3.57-4.83 7.18-9.56 13.38-11.28 4.59-1.27 7.75-.04 10.13 3.93 4.24 7.08 4.51 14.71 3.3 22.59-1.68 10.9-4.47 21.57-6.4 32.42-.44 2.44.25 4.81 2.42 6.12 2.05 1.24 4.27.41 6.07-.89 2.29-1.66 4.19-3.79 6.03-5.94.89-1.04 1.29-3.25 3.22-2.04a4.87 4.87 0 0 1 2.16 4.76c-1.13 8.53-15.79 15.94-23.28 11.82a13.1 13.1 0 0 1-6.58-13.89c1.69-9.22 3.94-18.35 5.44-27.6.79-4.87 1.8-9.74 1.51-14.76-.16-2.89-1.07-5.4-3.63-6.64-2.65-1.28-4.74.57-6.6 2.29a25.06 25.06 0 0 0-6.35 9.44c-5.73 14.83-8.85 30.34-11.45 45.96-.72 4.3-3.12 7.19-6.36 6.85-3.11-.33-5.43-4.02-4.56-8.15 1.53-7.25 3.01-14.5 4.39-21.78 1.75-9.26 2.97-18.59 2.55-28.06-.13-2.89-1.05-5.62-3.7-6.52-2.86-.97-4.91 1.26-6.37 3.62C75.01 164.18 69.4 179 65.5 194.51c-.12.46.08.97.21 1.45zM267.01 171.1c7.78 3.87 9.83 11.38 11.67 18.86.82 3.32.24 7.58 4.12 8.82 5 1.6 9.57-.97 13.01-4.29 2.11-2.04 2.67-1.79 3.96.26 4.14 6.56 4.16 6.53-3.05 10.17a35.85 35.85 0 0 1-14.09 3.99c-5.18.33-8.37-2.27-10.71-6.49-3.4-6.13-4.2-13.03-5.93-19.67-.93-3.58-1.4-7.47-4.67-10.06-1.38-1.1-2.81-.71-4.27-.69-2.07 7.15-1.72 14.73-3.8 21.88a114.5 114.5 0 0 1-3.62 10.31c-4.6 11.59-19.03 10.39-24.96 1.49-7.77-11.64-8.8-24.34-5.42-37.68a50.88 50.88 0 0 1 45.14-38.37c8.59-.75 16.63 1.48 23.42 7.62 10.04 9.09 4.9 22.33-4.17 27.66-5.22 3.08-11.14 3.97-16.63 6.19z"/>
  <path fill="#444" d="M190.23 263.39c5.09 1.19 9.71-.09 13.94 2.51l-.02-.08h-51.46c4.53-1.83 9.1-1.92 13.67-1.92-.02-2.14-1.62-2.32-2.6-3.04-7.93-5.83-12.46-13.63-13.81-23.36-.4-2.84.08-4.17 3.49-4.13 16.99.17 33.99-.08 50.97.19 4 .06 7.43 2.72 9.86 5.87 1.58 2.05 1.36 4.84.04 7.14-1.43 2.48-3.86 4.2-6.65 3.42-3.37-.94-4.62.65-6.13 3.09-2.62 4.25-6.75 7.11-11.3 10.31zM155.49 91.62c4.28.01 11.04.91 17.69 2.46 8.41 1.96 16.57.15 24.69-1.59 9.36-2 18.5-1.53 27.57 1.38 3.97 1.27 5.15 4.06 2.53 7.32-2.09 2.61-2.99 5.53-3.76 8.58-2.2 8.73-6.13 12.38-14.9 13.61-9.05 1.27-16.76-1.99-20.58-8.94-1.27-2.31-2.06-4.89-3.03-7.36-.8-2.04-1.45-4.17-4.23-4.23-2.93-.07-3.35 2.14-4.02 4.24-4.45 14.1-15.1 19.86-29.02 15.81-4.11-1.2-6.92-3.6-8.48-7.69-2-5.22-2.97-10.79-6.49-15.53-1.88-2.53-1.31-5.63 3.11-6.39 5.43-.94 10.86-1.58 18.92-1.67z"/>
  <path fill="#fe6d3f" d="M65.71 195.96c-1.66-1.96-.23-3.84.27-5.65 3.89-13.98 9.07-27.42 16.71-39.84 1.69-2.75 3.9-5.1 7.17-4.21 3.53.97 4.05 4.33 4.18 7.7.63 16.43-3.43 32.2-6.63 48.08-.79 3.91-.43 7.14 3.57 8.63 2.82 1.05 5.21-2.23 6.04-6.92 2.71-15.34 5.64-30.65 11.29-45.25a26.82 26.82 0 0 1 6.56-9.9c2.04-1.93 4.44-3.4 7.19-2.34 2.94 1.13 3.83 3.88 3.95 6.92.29 7.35-1.29 14.5-2.53 21.66-1.24 7.17-3.01 14.24-4.32 21.39-.93 5.05 1.04 9.25 5.06 12.24 4.28 3.19 8.83 3.36 13.46.37a32.75 32.75 0 0 0 9.41-9.46c1.49-2.2.58-4.17-.9-5.31-2.02-1.55-2.04 1.28-2.96 2.11-1.72 1.57-3.21 3.4-4.98 4.9-2.31 1.95-5.21 2.87-7.87 1.32-2.56-1.49-2.8-4.43-2.27-7.16 1.72-8.76 3.62-17.49 5.32-26.25 1.65-8.51 2.67-16.86-1.01-25.35-3.55-8.19-10.24-8.08-16.52-3.03-5.99 4.82-9.75 11.18-12.13 18.45-.58 1.77-.51 4.13-2.92 4.88 2.72-8.87 5.96-17.37 13.31-23.72a16.64 16.64 0 0 1 9.75-4.19c3.83-.34 6.45 1.26 8.46 4.73 5.3 9.18 3.93 18.87 2.32 28.46-1.48 8.86-3.72 17.6-5.6 26.4a5.61 5.61 0 0 0 2 5.8c2.04 1.57 4.24.25 5.89-1.06 3.51-2.77 6.18-6.4 8.91-10.05 4.39 6.49 4.32 8.32-.4 13.58-2.44 2.72-5.05 5.38-8.4 6.86-4.83 2.14-9.77 1.87-14.06-1.39-4.53-3.43-5.89-8.41-4.94-13.77 1.65-9.35 3.93-18.59 5.47-27.96.77-4.68 1.86-9.4 1.44-14.25-.23-2.67-1.22-5.06-3.61-6.09-2.2-.94-4 .83-5.6 2.31a25.46 25.46 0 0 0-6.52 9.81c-5.57 14.79-8.77 30.19-11.28 45.74-.75 4.65-2.85 7.08-6.85 6.77-4.68-.36-5.68-3.67-5.08-7.43 1.23-7.76 2.83-15.47 4.31-23.19 1.73-9.09 2.98-18.22 2.65-27.51-.1-2.89-1.12-5.81-3.69-6.44-2.33-.57-4.18 1.73-5.6 4.03-8.55 13.85-14.02 28.91-18.02 44.58z"/>
  <path fill="#fe6c3e" d="M267.01 171.1c1.88-2.66 5.04-2.2 7.64-3.04 5.81-1.86 11.27-4.3 14.87-9.42 6.59-9.36 2.24-21.22-9.28-25.71-15.12-5.88-29.06-2.11-41.25 6.93-14.12 10.48-21.66 25.24-20.81 43.08.48 10.08 2.27 20.36 11.89 26.65 7.07 4.62 14.59 2.59 18.48-4.78 4.11-7.78 5.4-16.3 6.38-24.88.32-2.78.45-5.56 2.14-7.94-1.28 11.07-2.44 22.02-6.81 32.61-4.85 11.74-20.27 10.52-26.16 1.54-7.8-11.91-9.1-24.95-5.37-38.36 6.18-22.17 21.05-35.19 43.7-38.56 9.48-1.41 18.5.73 26.1 7.7 9.34 8.57 5.8 22.57-4.36 28.4a48.3 48.3 0 0 1-17.16 5.78z"/>
  <path fill="#add4ec" d="M253.95 149.94l-2.01 1.96c-2.13 3.01-1.82 6.76-3.07 10.04-1 .04-2.02-.05-2.98.15-1.61.33-3.89-1.12-4.7 1.35a4.34 4.34 0 0 0 2.48 5.42c5.17 2.3 4.48 5.81 3.71 10.44-.71 4.3-.62 8.88-1.49 13.2-.72 3.59-2.59 6.94-3.94 10.4-4.67 2.4-8.91.53-11.82-5.24-3.14-6.21-3.16-12.96-2.52-19.55 1.02-10.42 4.37-20.09 11.57-28.06 5.89-6.53 13.1-10.61 21.9-11.5 3.3-.33 6.67-.21 9.99-.02 7.14.4 12.86 6.16 12.36 12.36-.39 4.89-3.82 7.68-7.63 9.78a22.5 22.5 0 0 1-16.81 2.23l.06.05c-1.2-2.41-.25-4.71.22-7.08.92-4.64-.47-6.1-5.32-5.93z"/>
  <path fill="#fe693a" d="M258.99 162.91c4.98.39 9.81.02 14.57-1.84 5.83-2.29 10.13-7.7 9.41-12.48-.7-4.63-6.57-9.14-12.44-9.63-23.56-1.96-37.46 13.46-41.55 34.06-1.52 7.67-1.79 15.34.99 22.87 2.2 5.95 6.57 8.56 11.98 7.03-2.58 3.87-5.5 2.06-8.13.26-4.28-2.93-6.14-7.56-6.63-12.37-1.6-15.78 1.31-30.64 12.4-42.54 9.38-10.06 21.84-12.07 34.87-9.78 4.47.78 8.19 4.02 9.35 8.81 1.16 4.79-.6 8.79-4.49 11.86-6.13 4.81-12.84 6.35-20.33 3.75z"/>
  <path fill="#fe6c3e" d="M253.95 149.94c5.03-1.69 5.78-1.11 6.05 3.77.17 3.17-1.77 6.05-.95 9.24-1.88-1.58-1.49-3.92-.86-5.53 1.75-4.53.11-6.65-4.24-7.48z"/>
  <path fill="#fe6f42" d="M248.87 161.95c.33-3.56-.07-7.34 3.07-10.04-1.06 3.33-.98 7.02-3.07 10.04z"/>
  <path fill="#b4d2e1" d="M213.01 243.12c-.17 2.67-1.66 4.58-4.79 4.8-1.23.09-3.35-.21-2.43-1.9 1.39-2.58-.28-6.94 3.5-7.73 1.9-.4 3.62 1.95 3.72 4.83z"/>
  <path fill="#add4ec" d="M155.69 121.13c-10.49.05-18.56-11.16-15.29-21.2a5.78 5.78 0 0 1 4.5-4.17c8.02-1.76 16.08-2.53 24.08-.03 5.85 1.83 7.16 4.71 5.33 10.68-3.08 10.08-8.89 14.67-18.62 14.72zM208.25 121.13c-11.6-.02-18.73-6.16-20.32-16.26-.69-4.38.59-7.58 5.1-8.88 7.98-2.31 16-2.68 24.1-.49 4.06 1.1 5.95 3.73 5.23 7.75-1.23 6.9-1.08 14.78-10.06 17.16-1.74.47-3.57.64-4.05.72z"/>
  <path fill="none" d="M107.24 105.46l70.71-70.71"/>
  <path fill="none" stroke="#000" stroke-miterlimit="10" stroke-width="4" d="M182.44 180.48"/>
  <g>
    <path fill="#444" d="M108.68 104.08l142.56 148.76-2.89 2.77L105.8 106.85z"/>
  </g>
  <g>
    <path fill="#444" d="M248.96 104.07l2.89 2.77-142.77 148.77-2.89-2.77z"/>
  </g>
</svg>

            </CenterBloc>
          </AbsoluteContainer>
        </Segment>

        <Container>
          <MarkdownRenderer
            markdown={frHomepage.node.content.content}
            style={{ marginBottom: 10 }}
          />
          <a
            href={require("../static/files/CV_Massimo_RUSSO.pdf")}
            target={"_blank"}
            title={"CV Massimo Russo - PDF"}
          >
            Téléchargez la version PDF
          </a>
        </Container>

        <Container fluid style={{ backgroundColor: "#fff" }}>
          <Container>
            <h2>Ils ont dit...</h2>
            <Slider {...settings}>
              {[
                frHomepage.node.recommendations.map((recommandation, i) => (
                  <Recommandation>
                    <Item.Group unstackable>
                      <Item>
                        <Item.Image
                          size="tiny"
                          style={{ maxWidth: 40 }}
                          src={require("../static/logos/LinkedIn_logo.png")}
                          alt="LinkedIn"
                        />
                        <Item.Content>
                          <Item.Header>
                            "{recommandation.content.content}"
                          </Item.Header>
                          <Item.Description>
                            {recommandation.author}
                          </Item.Description>
                          <a href={`${recommandation.link}`}>
                            Voir le profil de l'auteur
                          </a>
                        </Item.Content>
                      </Item>
                    </Item.Group>
                  </Recommandation>
                ))
              ]}
            </Slider>
          </Container>
        </Container>
      </div>
    );

    return (
      <div>
        <Helmet>
          <title>{config.siteTitle}</title>
        </Helmet>
        <HOMEPAGE />
      </div>
    );
  }
}

IndexPage.propTypes = propTypes;

export default IndexPage;

export const pageQuery = graphql`
  query PageQuery {
    fr: allContentfulHomepage(filter: { node_locale: { eq: "fr-CA" } }) {
      edges {
        node {
          id
          name
          content {
            content
          }
          recommendations {
            id
            author
            content {
              content
            }
            link
          }
        }
      }
    }
    bg: allContentfulAsset(filter: { id: { eq: "c5PxvSEWkBqoswQKa0ioIAq" } }) {
      edges {
        node {
          id
          sizes(maxWidth: 4000) {
            base64
            aspectRatio
            src
            srcSet
            sizes
          }
        }
      }
    }
  }
`;
